<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pengumuman Kelulusan | MTSS Mursyidul Falah</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #eef3ff;
      margin: 0;
    }
    header, footer {
      background: #1a237e;
      color: white;
      padding: 15px 20px;
    }
    header h1 {
      margin: 0;
      font-size: 18px;
    }
    nav {
      float: right;
    }
    nav a {
      color: white;
      margin-left: 20px;
      text-decoration: none;
    }

    .section {
      display: none;
      max-width: 700px;
      margin: 40px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .active {
      display: block;
    }
    img.logo {
      width: 80px;
      margin-bottom: 10px;
    }
    h2, h3 {
      color: #1a237e;
    }
    p {
      font-size: 15px;
    }
    button, input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #2962ff;
      color: white;
      border: none;
      cursor: pointer;
    }
    .hasil {
      margin-top: 20px;
    }
    .status-lulus {
      background: #43a047;
      color: white;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
      font-weight: bold;
    }
    .status-tidak {
      background: #e53935;
      color: white;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
      font-weight: bold;
    }
    .foto-siswa {
      width: 130px;
      border-radius: 10px;
      border: 2px solid #2962ff;
      margin-top: 15px;
    }
    footer {
      text-align: center;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <header>
    <h1>MTSS Mursyidul Falah <span style="font-weight: normal;">| Tahun Pelajaran 2024–2025</span></h1>
    <nav>
      <a href="#" onclick="showPage('beranda')">Beranda</a>
      <a href="#" onclick="showPage('cek')">Cek Kelulusan</a>
    </nav>
  </header>

  <!-- Halaman 1: Sambutan -->
  <div class="section active" id="beranda">
    <center>
      <img src="https://raw.githubusercontent.com/mtssmursyidulfalah/Kelulusan_Murfal/main/assets/logo.png" class="logo" alt="Logo Sekolah">
    </center>
    <h2 style="text-align:center;">PENGUMUMAN KELULUSAN SISWA</h2>
    <h3 style="text-align:center;">MTSS MURSYIDUL FALAH</h3>
    <p style="text-align:center;">
      Pengumuman dapat diakses mulai:<br><strong>17 Mei 2025, Pukul 09:00 WIB</strong>
    </p>
    <hr>
    <h4 style="color: #1a237e;">Sambutan Kepala Madrasah</h4>
    <p>
      Assalamu’alaikum Wr. Wb.<br><br>
      Dengan memanjatkan puji syukur ke hadirat Allah SWT, kami sampaikan selamat kepada seluruh siswa kelas IX MTSS Mursyidul Falah yang telah menyelesaikan pendidikan dengan baik. Semoga ilmu yang diperoleh dapat bermanfaat dan menjadi bekal untuk melanjutkan pendidikan ke jenjang yang lebih tinggi.<br><br>
      Untuk melihat hasil kelulusan, silakan klik tombol “Cek Kelulusan” dan masukkan NISN Anda.<br><br>
      Wassalamu’alaikum Wr. Wb.
    </p>
    <p><strong>ABDUL LATIP, S.Pd.I</strong><br>Kepala MTSS Mursyidul Falah</p>
    <button onclick="showPage('cek')">Cek Kelulusan</button>
  </div>

  <!-- Halaman 2: Cek Kelulusan -->
  <div class="section" id="cek">
    <center>
      <img src="https://raw.githubusercontent.com/mtssmursyidulfalah/Kelulusan_Murfal/main/assets/logo.png" class="logo" alt="Logo Sekolah">
    </center>
    <h2>Cek Kelulusan Siswa</h2>
    <p>Masukkan NISN untuk melihat status kelulusan:</p>
    <input type="text" id="nisn" placeholder="Masukkan NISN">
    <button onclick="cekKelulusan()">Cari</button>
    <div class="hasil" id="hasil"></div>
  </div>

  <footer>
    © 2025 MTSS Mursyidul Falah. Hak Cipta Dilindungi.
  </footer>

  <script>
    const csvUrl = "https://raw.githubusercontent.com/mtssmursyidulfalah/Kelulusan_Murfal/main/data/siswa.csv";
    const fotoBase = "https://raw.githubusercontent.com/mtssmursyidulfalah/Kelulusan_Murfal/main/fotosiswa/";
    let siswaData = [];

    // Ambil data siswa dari CSV
    fetch(csvUrl)
      .then(res => res.text())
      .then(csv => {
        const lines = csv.trim().split('\n');
        const headers = lines[0].split(',');
        siswaData = lines.slice(1).map(line => {
          const cells = line.split(',');
          let obj = {};
          headers.forEach((h, i) => obj[h.trim()] = cells[i]?.trim());
          return obj;
        });
      });

    function cekKelulusan() {
      const nisn = document.getElementById('nisn').value.trim();
      const hasil = document.getElementById('hasil');
      hasil.innerHTML = "";

      const siswa = siswaData.find(s => s.nisn === nisn);
      if (!siswa) {
        hasil.innerHTML = "<p style='color:red;'>NISN tidak ditemukan.</p>";
        return;
      }

      const isLulus = siswa.status.toLowerCase() === 'lulus';
      hasil.innerHTML = `
        <h3>${siswa.nama}</h3>
        <img src="${fotoBase}${siswa.foto}" class="foto-siswa" alt="Foto ${siswa.nama}" onerror="this.style.display='none'">
        <p><strong>Kelas:</strong> ${siswa.kelas}</p>
        <div class="${isLulus ? 'status-lulus' : 'status-tidak'}">
          ${isLulus ? 'SELAMAT, Anda dinyatakan <strong>LULUS</strong>' : 'MAAF, Anda <strong>TIDAK LULUS</strong>'}
        </div>
      `;
    }

    function showPage(page) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(page).classList.add('active');
      window.scrollTo(0, 0);
    }
  </script>

</body>
</html>
